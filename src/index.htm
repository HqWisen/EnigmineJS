<!DOCTYPE html>

<!-- FIXME click on href != click on layout -->
<html>

<head>
  <meta charset="utf-8" />
  <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Ubuntu:regular,bold&subset=Latin">
  <link rel="stylesheet" type="text/css" href="css/default.css">
  <title>v2 (enigmine)</title>
</head>

<body>
  <section id="toolbar-section">
    <div id="toolbar">
      <ul class="tabs">
        <li class="tab" id="utilitytab"><a id="utilitylink" href="#utility">utility</a></li>
        <li class="tab" id="graphictab"><a id="graphiclink" href="#graphic">graphic</a></li>
        <li class="tab" id="abouttab"><a id="aboutlink" href="#about">about</a></li>
      </ul>
      <div id="tabbar">
        <div id="bar" /></div>
    </div>
  </section>

  <div id="utility">
    <section id="section-config">
      <div id="rotors-container">
      </div>
      <div id="plugboard-container">
      </div>
    </section>
    <section id="section-input">
      <div id="input-container">
      </div>
      <div id="output-container">
      </div>
    </section>
  </div>
  <div id="graphic">
    Grapic interfaace not implement.
  </div>
  <div id="about">
    Hakim.Boulahya@ulb.ac.be
  </div>


  <!--div class="notification"><div class="notif-message">Notification test</div></div-->
  <script src="js/jquery.js" type="text/javascript"></script>
  <script>
    $(function () {
      "use strict";
      var INITIAL_TAB = 0;
      var tabList = ["#utilitytab", "#graphictab", "#abouttab"];
      var linkList = ["#utilitylink", "#graphiclink", "#aboutlink"];
      var widthList = [];
      for(var i=0;i<tabList.length;i++){
        widthList.push($(tabList[i]).outerWidth());
      }
      function beforeTabWidth(index) {
        var width = 0;
        for (var i = 0; i < index; i++) {
          width += widthList[i];
        }
        return width;
      }
      function tabWidth(index) {
        return widthList[index];
      }
      function activeLink(id) {
        id = "#" + id;
        var index = -1;
        for(var i=0;i<linkList.length;i++){
          if(id == linkList[i]){index = i;break;};
        }
        $("#bar").animate({
          width: tabWidth(index),
          left: beforeTabWidth(index)
        }, 300);
      }
      $('ul.tabs').each(function () {
        var $active, $content, $links = $(this).find('a');
        $active = $($links[INITIAL_TAB]);
        $content = $($active[0].hash);
        $links.not($active).each(function () {
          $(this.hash).hide();
        });
        $(this).on('click', 'a', function (e) {
          $content.hide();
          $active = $(this);
          $content = $(this.hash);
          $content.show();
          e.preventDefault();
          activeLink($(this).attr('id'));
        });
      });
      function initialTab(index) {
        $("#bar").css({
          width: tabWidth(index),
          left: beforeTabWidth(index)
        });
      }
      initialTab(INITIAL_TAB);

    });
  </script>
  <script src="js/util.js" type="text/javascript"></script>
  <script src="js/rotor.js" type="text/javascript"></script>
  <script src="js/plugboard.js" type="text/javascript"></script>
  <script src="js/factory.js" type="text/javascript"></script>
  <script src="js/machine.js" type="text/javascript"></script>
  <script src="js/view.js" type="text/javascript"></script>

</body>

</html>
